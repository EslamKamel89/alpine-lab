<!DOCTYPE html>
<html lang="en" class="h-full antialiased">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Todo â€¢ Tailwind (Static Template)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <meta name="color-scheme" content="light dark" />
    <script
      defer
      src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"
    ></script>
  </head>
  <body
    class="min-h-screen bg-gradient-to-br from-slate-50 to-indigo-50 text-slate-800 dark:from-slate-900 dark:to-slate-800 dark:text-slate-100"
  >
    <main class="container mx-auto px-4 py-10 md:py-16" x-data="todoApp()">
      <section class="mx-auto max-w-2xl">
        <!-- App Card -->
        <div
          class="rounded-2xl bg-white/80 shadow-xl ring-1 ring-slate-200 backdrop-blur dark:bg-slate-900/60 dark:ring-slate-700"
        >
          <!-- Header -->
          <header
            class="flex items-center justify-between gap-3 px-5 py-6 md:px-8"
          >
            <div>
              <h1 class="text-2xl font-extrabold tracking-tight md:text-3xl">
                Todos
              </h1>
              <p class="mt-1 text-sm text-slate-500 dark:text-slate-400">
                WORK HARD PLAY HARD
              </p>
            </div>
            <!-- Theme hint (optional) -->
            <span class="hidden text-xs text-slate-400 md:inline"
              >100% is easier than 90%</span
            >
          </header>

          <!-- New Todo Input -->
          <div
            class="border-t border-slate-200 px-5 py-4 md:px-8 dark:border-slate-700"
          >
            <form
              class="relative flex items-center gap-3"
              aria-label="Add new todo"
              @submit.prevent="addTodo"
            >
              <!-- Checkbox placeholder (for symmetry) -->
              <div
                class="pointer-events-none grid h-6 w-6 place-items-center rounded border border-slate-300 text-slate-300 dark:border-slate-600 dark:text-slate-600"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  class="h-4 w-4"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                >
                  <path d="M20 6L9 17l-5-5" />
                </svg>
              </div>
              <div class="flex flex-col w-full">
                <input
                  type="text"
                  placeholder="What needs to be done?"
                  x-model="title"
                  class="w-full rounded-xl border border-slate-300 bg-white/70 px-4 py-3 text-base outline-none ring-offset-2 transition focus:border-indigo-400 focus:ring-2 focus:ring-indigo-300 dark:border-slate-700 dark:bg-slate-900/60 dark:focus:border-indigo-500 dark:focus:ring-indigo-500/30"
                />
                <span
                  class="text-red-500 text-xs my-2"
                  x-text="errors?.title"
                ></span>
              </div>
              <button
                type="submit"
                class="shrink-0 rounded-xl bg-indigo-600 px-4 py-2.5 text-sm font-semibold text-white shadow hover:bg-indigo-500 focus:outline-none focus-visible:ring-2 focus-visible:ring-indigo-500 focus-visible:ring-offset-2 dark:ring-offset-slate-900"
              >
                Add
              </button>
            </form>
          </div>

          <!-- List -->
          <ul
            class="divide-y divide-slate-200 dark:divide-slate-800 flex flex-col-reverse"
            role="list"
            aria-label="Todo list"
            x-show="todos.length"
          >
            <template x-for="todo in filteredTodos" :key="todo.id">
              <!-- Item (active) -->
              <li
                class="group flex items-start gap-3 px-5 py-4 md:px-8"
                data-id="1"
              >
                <div
                  class="flex cursor-pointer select-none items-start w-full gap-3"
                >
                  <input
                    type="checkbox"
                    class="mt-1 h-5 w-5 rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 dark:border-slate-600 dark:bg-slate-900"
                    aria-label="Toggle todo"
                    x-model="todo.completed"
                  />

                  <div class="flex flex-col space-y-2 w-full">
                    <input
                      type="text"
                      x-show="!todo.completed && todo.edit"
                      x-model="todo.title"
                      class="p-2 rounded-lg"
                      @click.away="todo.edit=false"
                      @keyup.enter="todo.edit=false"
                      @keyup.escape="todo.title = todo.oldTitle; todo.edit= false;"
                    />
                    <span
                      x-show="!todo.edit || todo.completed"
                      x-bind:class="{'block text-base':true , 'line-through decoration-2 decoration-slate-400/70 text-slate-400 dark:text-slate-500':todo.completed}"
                      x-text="todo.title"
                      @dblclick="todo.edit=true;todo.oldTitle = todo.title;"
                    ></span>
                    <input
                      type="text"
                      x-show="!todo.completed  && todo.editDescription"
                      x-model="todo.description"
                      class="p-2 rounded-lg w-full"
                      @click.away="todo.editDescription=false"
                      @keyup.enter="todo.editDescription=false"
                      @keyup.escape="todo.description = todo.oldDescription; todo.editDescription = false;"
                    />
                    <span
                      class="block text-sm text-slate-500 dark:text-slate-400"
                      x-show="!todo.editDescription || todo.completed"
                      x-text="todo.description"
                      @dblclick="todo.editDescription=true; todo.oldDescription = todo.description"
                    ></span>
                  </div>
                </div>
                <button
                  type="button"
                  class="invisible ml-auto rounded-lg p-2 text-slate-400 hover:text-rose-500 group-hover:visible"
                  aria-label="Delete todo"
                  @click="removeTodo(todo)"
                >
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    viewBox="0 0 24 24"
                    fill="currentColor"
                    class="h-5 w-5"
                  >
                    <path
                      d="M9 3h6a1 1 0 011 1v1h4a1 1 0 010 2h-1.08l-.82 12.3A3 3 0 0115.11 23H8.89a3 3 0 01-2.99-2.7L5.08 7H4a1 1 0 110-2h4V4a1 1 0 011-1zm2 0v1h2V3h-2zM7.08 7l.8 12a1 1 0 00.99.92h6.26a1 1 0 00.99-.92l.8-12H7.08z"
                    />
                  </svg>
                </button>
              </li>
            </template>
          </ul>

          <!-- Footer: Filters / Counter / Clear Completed -->
          <footer
            x-show="todos.length"
            class="flex flex-col gap-4 border-t border-slate-200 px-5 py-4 md:flex-row md:items-center md:justify-between md:px-8 dark:border-slate-700"
          >
            <!-- Counter -->
            <p
              class="order-2 text-sm text-slate-600 dark:text-slate-300 md:order-1"
            >
              <span aria-live="polite" aria-atomic="true">
                <strong
                  class="font-semibold"
                  x-text="uncompletedTodos.length"
                ></strong>
              </span>
              <span
                x-text="uncompletedTodos.length > 1 ? 'items':'item'"
              ></span>
              left
            </p>

            <!-- Filters -->
            <nav
              class="order-1 -mx-1.5 flex items-center justify-center gap-1 md:order-2"
              aria-label="Filters"
            >
              <!-- Selected style: bg-indigo-600 text-white; Unselected: hover:bg-slate-100 -->
              <button
                type="button"
                class="rounded-xl px-3 py-1.5 text-sm font-medium text-slate-700 ring- dark:text-slate-200 dark:ring-slate-700"
                :class="{'bg-indigo-600': filter=='all'}"
                @click="filter= 'all'"
              >
                All
              </button>
              <button
                type="button"
                class="rounded-xl px-3 py-1.5 text-sm font-medium text-slate-700 ring-1 ring-slate-200 dark:text-slate-200 dark:ring-slate-700"
                :class="{'bg-indigo-600': filter=='active'}"
                @click="filter='active'"
              >
                Active
              </button>
              <button
                type="button"
                class="rounded-xl px-3 py-1.5 text-sm font-medium text-slate-700 ring-1 ring-slate-200 dark:text-slate-200 dark:ring-slate-700"
                :class="{'bg-indigo-600': filter=='completed'}"
                @click="filter = 'completed'"
              >
                Completed
              </button>
              <!-- Alpine idea: track currentFilter in state; apply conditional classes -->
            </nav>

            <!-- Clear Completed -->
            <div
              class="order-3 text-center md:order-3"
              x-show="completedTodos.length"
              @click="clearCompleted"
            >
              <button
                type="button"
                class="rounded-xl px-3 py-1.5 text-sm font-semibold text-rose-600 ring-1 ring-rose-200 hover:bg-rose-50 dark:ring-rose-800/40 dark:hover:bg-rose-900/20"
              >
                Clear completed
              </button>
              <!-- Alpine idea: clear all items with completed === true -->
            </div>
          </footer>
        </div>
      </section>
    </main>
    <script src="./todos_data.js"></script>
    <script>
      function todoApp() {
        return {
          todos: Array.from(todosData),
          title: "",
          filter: "all",
          errors: {},
          get uncompletedTodos() {
            return this.todos.filter((t) => !t.completed);
          },
          get completedTodos() {
            return this.todos.filter((t) => t.completed);
          },
          clearCompleted() {
            this.todos = this.todos.filter((t) => !t.completed);
          },
          addTodo() {
            if (this.title === "") {
              this.errors.title = "You can't leave the todo title empty";
              return;
            }
            this.todos.push({
              id: Date.now(),
              title: this.title,
              description: "Tap to add description",
              completed: false,
              dueDate: "2024-01-16",
              priority: "low",
              category: "travel",
              edit: false,
              editDescription: false,
            });
            this.title = "";
          },
          removeTodo(todo) {
            this.todos = this.todos.filter((t) => t.id !== todo.id);
          },
          get filteredTodos() {
            if (this.filter === "all") return this.todos;
            if (this.filter === "completed")
              return this.todos.filter((t) => t.completed);
            if (this.filter === "active")
              return this.todos.filter((t) => !t.completed);
          },
        };
      }
    </script>
  </body>
</html>
